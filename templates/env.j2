{#
SPDX-FileCopyrightText: 2023 Slavi Pantaleev
SPDX-FileCopyrightText: 2023 - 2025 Meier Lukas
SPDX-FileCopyrightText: 2025 Suguru Hirahara

SPDX-License-Identifier: Apache-2.0
#}

{#
See: https://homarr.dev/docs/1.10.0/advanced/running-as-different-user/

If a UNIX socket is used, we need to run as root, because:
- we won't be able to access the socket (owned by root:docker on most distros)
- we won't be able to access the /config files (unless we add another capability that lets root access other users' files)

If a non-UNIX-socket endpoint is used, we can just run with the uid/gid, because:
- reading through the remote (TCP) endpoint does not require special privileges
- the configuration files are owned by the same uid/gid, so reading them works
#}
{% if not homarr_docker_endpoint_is_unix_socket %}
PUID={{ homarr_uid }}
PGID={{ homarr_gid }}
{% else %}
PUID=0
PGID=0
{% endif %}

{#
See: https://github.com/homarr-labs/homarr/blob/dev/.env.example
and https://homarr.dev/docs/advanced/environment-variables/
#}

AUTH_SECRET={{ homarr_environment_variables_auth_secret }}

SECRET_ENCRYPTION_KEY={{ homarr_environment_variables_secret_encryption_key }}

LOG_LEVEL={{ homarr_environment_variables_log_level }}

DOCKER_HOSTNAMES={{ homarr_environment_variables_docker_hostnames }}
DOCKER_PORTS={{ homarr_environment_variables_docker_ports }}

{% if homarr_environment_variables_db_driver == 'mysql2' %}
DB_DRIVER=mysql2
DB_DIALECT=mysql
DB_HOST={{ homarr_environment_variables_db_hostname }}
DB_PORT={{ homarr_environment_variables_db_port }}
DB_USER={{ homarr_environment_variables_db_user }}
DB_PASSWORD={{ homarr_environment_variables_db_password }}
DB_NAME={{ homarr_environment_variables_db_name }}
{% else %}
DB_DRIVER=better-sqlite3
DB_URL={{ homarr_environment_variables_db_url }}
{% endif %}

LOCAL_CERTIFICATE_PATH={{ homarr_environment_variables_local_certificate_path }}

TURBO_TELEMETRY_DISABLED={{ homarr_environment_variables_turbo_telemetry_disabled }}

ENABLE_KUBERNETES={{ homarr_environment_variables_enable_kubernetes | to_json }}

{{ homarr_environment_variables_additional_variables }}
