{#
SPDX-FileCopyrightText: 2023 Slavi Pantaleev
SPDX-FileCopyrightText: 2023 - 2025 Meier Lukas
SPDX-FileCopyrightText: 2025 Suguru Hirahara

SPDX-License-Identifier: Apache-2.0
#}

TZ={{ homarr_environment_variables_tz }}

{#
See: https://homarr.dev/docs/1.10.0/advanced/running-as-different-user/

If a UNIX socket is used, we need to run as root, because:
- we won't be able to access the socket (owned by root:docker on most distros)
- we won't be able to access the /config files (unless we add another capability that lets root access other users' files)

If a non-UNIX-socket endpoint is used, we can just run with the uid/gid, because:
- reading through the remote (TCP) endpoint does not require special privileges
- the configuration files are owned by the same uid/gid, so reading them works
#}
{% if not homarr_docker_endpoint_is_unix_socket %}
PUID={{ homarr_uid }}
PGID={{ homarr_gid }}
{% else %}
PUID=0
PGID=0
{% endif %}

{#
See: https://github.com/homarr-labs/homarr/blob/dev/.env.example
and https://homarr.dev/docs/advanced/environment-variables/
#}

AUTH_SECRET={{ homarr_environment_variables_auth_secret }}

SECRET_ENCRYPTION_KEY={{ homarr_environment_variables_secret_encryption_key }}

LOG_LEVEL={{ homarr_environment_variables_log_level }}

DOCKER_HOSTNAMES={{ homarr_environment_variables_docker_hostnames }}
DOCKER_PORTS={{ homarr_environment_variables_docker_ports }}

{% if homarr_database_type == 'better-sqlite3' %}
DB_DRIVER=better-sqlite3
DB_DIALECT=sqlite
DB_URL={{ homarr_database_url }}
{% endif %}

{% if homarr_database_type == 'mysql2' %}
DB_DRIVER=mysql2
DB_DIALECT=mysql
DB_HOST={{ homarr_database_mysql_hostname }}
DB_PORT={{ homarr_database_mysql_port }}
DB_USER={{ homarr_database_mysql_username }}
DB_PASSWORD={{ homarr_database_mysql_password }}
DB_NAME={{ homarr_database_name }}
{% endif %}

{% if homarr_database_type == 'node-postgres' %}
DB_DRIVER=node-postgres
DB_DIALECT=postgresql
DB_HOST={{ homarr_database_postgres_hostname }}
DB_PORT={{ homarr_database_postgres_port }}
DB_USER={{ homarr_database_postgres_username }}
DB_PASSWORD={{ homarr_database_postgres_password }}
DB_NAME={{ homarr_database_name }}
{% endif %}

REDIS_IS_EXTERNAL={{ homarr_environment_variables_redis_is_external | to_json }}
{% if homarr_environment_variables_redis_is_external %}
REDIS_HOST={{ homarr_redis_hostname }}
REDIS_PORT={{ homarr_redis_port }}
REDIS_USERNAME={{ homarr_redis_username }}
REDIS_PASSWORD={{ homarr_redis_password }}
REDIS_DATABASE_INDEX={{ homarr_redis_database }}
{% endif %}

LOCAL_CERTIFICATE_PATH={{ homarr_environment_variables_local_certificate_path }}

TURBO_TELEMETRY_DISABLED={{ homarr_environment_variables_turbo_telemetry_disabled }}

ENABLE_KUBERNETES={{ homarr_environment_variables_enable_kubernetes | to_json }}

{{ homarr_environment_variables_additional_variables }}
